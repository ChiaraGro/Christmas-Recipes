<ng-container *ngIf="(recipeDetails$ | async) as recipe">
    <div class="card overflow-hidden border-0 bg-2 text-4">
        <div class="w-100 p-5 d-flex flex-column">
            <div class="w-100 d-flex justify-content-between align-items-center mb-3">
                <h2><b>{{recipe.title}}</b></h2>
                <button class="bg-transparent text-4 p-0" (click)="closeModal.emit()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-x" viewBox="0 0 14 14">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                      </svg>
                </button>
            </div>
            <div class="d-flex align-items-center mb-2">
                <h4 *ngFor="let cuisine of recipe.cuisines; let i = index" class="mr-1">{{cuisine}}{{recipe.cuisines.length > 1 && i != recipe.cuisines.length-1 ? ' | ' : '' }}</h4>
            </div>
            <div class="d-flex align-items-center text-3">
                <div *ngIf="recipe.vegetarian || recipe.vegan" class="mr-2 d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" width="22" height="22"version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve">
                        <g>
                            <g>
                                <path d="M111.732,111.733C71.079,152.386,41.053,197.055,22.489,244.5C7.559,282.657-0.008,322.618,0,363.273    c0.009,51.511,12.144,90.79,18.775,108.41l107.228-107.228V98.057C121.195,102.475,116.436,107.029,111.732,111.733z"/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M244.463,22.502c-30.598,11.977-60.038,28.728-87.995,50.016v261.473L274.579,215.88V12.36    C264.433,15.244,254.385,18.619,244.463,22.502z"/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M147.545,385.998v-0.001L40.318,493.225c17.628,6.633,56.932,18.774,108.471,18.776c0.005,0,0.006,0,0.011,0    c40.643,0,80.595-7.571,118.74-22.501c47.429-18.565,92.086-48.586,132.73-89.231c4.704-4.703,9.258-9.462,13.676-14.272H147.545z    "/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M363.213,0c-19.594,0-39.023,1.777-58.169,5.271v180.144l166.64-166.64C454.056,12.142,414.752,0,363.213,0z"/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M493.225,40.317l-166.64,166.64h180.144c3.498-19.166,5.275-38.616,5.271-58.23    C511.99,97.215,499.856,57.936,493.225,40.317z"/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M296.121,237.421L178.01,355.532h261.473c21.296-27.967,38.051-57.42,50.029-88.03    c3.878-9.911,7.247-19.945,10.128-30.081H296.121z"/>
                            </g>
                        </g>
                    </svg>
                    <h5 class="mx-1 mb-0">{{recipe.vegan ? 'Vegan' : 'Vegetarian'}}</h5>
                </div>
                <div *ngIf="recipe.glutenFree" class="mr-2 d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" width="22" height="22" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 1125.628 1125.628" style="enable-background:new 0 0 1125.628 1125.628;" xml:space="preserve">
                        <g>
                            <path d="M562.812,0.002C252.476,0.002,0,252.478,0,562.814s252.476,562.812,562.812,562.812   c310.34,0,562.816-252.476,562.816-562.812S873.152,0.002,562.812,0.002z M549.519,701.492c-14,15.033-28.964,28.403-52.992,40.11   c-24.032,11.711-54.35,17.564-91.051,17.564c-46.662,0-85.943-14.504-115.476-43.517c-29.537-29.009-45.481-66.672-45.481-112.986   v-79.694c0-46.139,15.398-83.758,43.801-112.856c28.398-29.099,65.568-43.648,110.311-43.648   c46.487,0,82.395,11.318,107.126,33.948c24.729,22.635,37.507,52.898,38.031,89.77l-0.374,2.081h-72.092   c-1.401-22-7.864-36.816-19.399-48.613c-11.534-11.796-28.402-17.949-50.594-17.949c-23.422,0-41.642,8.909-55.969,26.981   c-14.332,18.073-20.841,41.207-20.841,69.667v80.144c0,28.984,6.77,52.512,21.627,70.585   c14.853,18.072,34.539,27.104,59.705,27.104c17.826,0,32.671-1.827,43.51-5.489c10.834-3.658,16.159-8.188,25.159-13.591v-69.838   h-71v-53h146V701.492z M880.519,430.263h-190v106h163v57h-163v159h-75v-379h265V430.263z"/>
                        </g>
                    </svg>
                    <h5 class="mx-1 mb-0">Gluten-free</h5>
                </div>
                <div *ngIf="recipe.veryHealthy" class="mr-2 d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                    </svg>
                    <h5 class="mx-1 mb-0">Healthy</h5>
                </div>
                <div *ngIf="recipe.cheap" class="mr-2 d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-currency-dollar" viewBox="0 0 16 16">
                        <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                    </svg>
                    <h5 class="mx-1 mb-0">Cheap</h5>
                </div>
            </div>
            <div class="my-3">
                <div class="position-relative">
                    <p [innerHTML]="recipe.summary" class="summary-closed" [class.summaryOpen]="showSummary"></p>
                    <div class="summary-shadow" [class.summaryShadowOff]="showSummary"></div>
                </div>
                <button *ngIf="!showSummary" class="w-100 text-center summary-btn text-4" for="summary" (click)="$event.stopPropagation() ;showSummary = true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                    </svg>
                </button>
                <button *ngIf="showSummary" class="w-100 text-center summary-btn text-4" for="summary" (click)="$event.stopPropagation() ;showSummary = false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
                    </svg>
                </button>  
            </div>
            <div class="pb-5">
                <img [src]="recipe.image" [hidden]="imgLoading" (load)="onLoad()" class="w-100 align-self-center rounded my-3 shadow-sm">
                <ngx-skeleton-loader *ngIf="imgLoading" [theme]="{height:'400px'}"></ngx-skeleton-loader>
            </div>
            <div class="pt-5 position-relative border-top border-4">
                <h4 class="text-center title">Ingredients & Servings</h4>
                <div class="mb-3 d-flex flex-column pt-3">
                    <div class="w-100 align-selft-center d-flex justify-content-start align-items-center mb-4 pb-2">
                        <div class="mr-3 d-flex align-items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                            </svg>
                            <p class="mx-2 mb-0">{{recipe.readyInMinutes}} min</p>
                        </div>
                        <div class="d-flex align-items-center mr-3" [ngClass]="{'text-success': recipe.cheap}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-currency-dollar" viewBox="0 0 16 16">
                                <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                              </svg>
                              <p class="mx-2 mb-0">{{recipe.pricePerServing}}</p>
                        </div>
                        <div class="d-flex align-items-center mr-3" [ngClass]="{'text-success': recipe.cheap}">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor" width="20" height="20" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 490.7 490.7" style="enable-background:new 0 0 490.7 490.7;" xml:space="preserve">
                                    <g>
                                        <path d="M46.8,376.1h395.9c11.5,0,20.8-9.4,20.8-20.8c0-129.5-86.9-235.9-197.9-247.9v-22h17.7c11.5,0,20.8-9.4,20.8-20.8    c0-11.4-9.4-20.8-20.8-20.8h-77.1c-11.5,0-20.8,9.4-20.8,20.8c0,11.4,9.4,20.8,20.8,20.8h17.7v22C112.9,119.4,26,225.8,26,355.3    C26,366.8,35.4,376.1,46.8,376.1z M244.8,148c92.7,0,168.8,82.3,177.1,187.5H67.7C77,230.3,152.1,148,244.8,148z"/>
                                        <path d="M469.8,405.3h-449C9.3,405.3,0,414.7,0,426.1s9.4,20.8,20.8,20.8h448c11.5,0,21.9-9.4,21.9-20.8S481.3,405.3,469.8,405.3z    "/>
                                    </g>
                                </svg>
                            <p class="mx-2 mb-0">{{recipe.servings}} serving{{recipe.servings > 1 ? 's' : ''}}</p>
                        </div>
                    </div>
                    <div class="col-12 px-0 bg-4 text-2 p-3 mb-3 rounded">
                        <ul class="ingredients d-flex flex-row flex-wrap">
                            <li *ngFor="let ingredient of recipe.extendedIngredients" class="col-6 col-md-4 px-0 my-1" >
                                <p *ngIf="ingredient.measures.metric.amount as amount" class="my-0"><b>{{ingredient.name | titlecase}}</b> · {{(amount.toFixed(amount >= 1 ? 0 : 1))}} {{ingredient.measures.metric.unitShort}}</p>
                            </li>  
                        </ul>
                    </div>
                </div>
            </div>
            <ng-container *ngIf="recipe.instructions && recipe.instructions != ''">
                <div class="pt-5 border-top position-relative border-4">
                   <h4 class="text-center mb-3 title">Instructions</h4>
                    <p innerHtml="{{recipe.instructions}}"></p> 
                </div>
            </ng-container>
            <button class="btn btn-warning align-self-end bg-4 text-2 rounded" width="30px" height="30px" (click)="closeModal.emit()">Close</button>
        </div>
        
    </div>
</ng-container>
<ng-container *ngIf="!(recipeDetails$ | async) && modalSkeletonLoader">
    <div class="card overflow-hidden border-0">
        <div class="w-100 p-5 d-flex flex-column">
            <ngx-skeleton-loader count="1" [theme]="{height:'34px'}"></ngx-skeleton-loader>
            <ngx-skeleton-loader count="1" [theme]="{height:'16px',display:'inline','width':'140px','margin-right':'10px'}"></ngx-skeleton-loader>
            <div class="my-3">
                <ngx-skeleton-loader count="3" ></ngx-skeleton-loader>
            </div>
            <ngx-skeleton-loader count="1" [theme]="{height:'500px'}"></ngx-skeleton-loader>
            <br>
            
            <ngx-skeleton-loader count="10" [theme]="{width:'30%','margin-right':'10px', display:'inline'}"></ngx-skeleton-loader>
            <br>
            <ngx-skeleton-loader count="8" appearance="line"></ngx-skeleton-loader>
        </div>
    </div>
</ng-container>